set -e

# Scan for secrets (requires gitleaks: brew install gitleaks)
if command -v gitleaks &> /dev/null; then
    gitleaks protect --staged --no-banner
else
    echo "Warning: gitleaks not installed, skipping secret scan"
    echo "Install with: brew install gitleaks"
fi

# Run lint-staged (formats and lints staged files only)
npx lint-staged

# Type check (runs on all files, but fast)
npm run check

# Run unit tests (fast, no browser needed)
npm run test:unit
